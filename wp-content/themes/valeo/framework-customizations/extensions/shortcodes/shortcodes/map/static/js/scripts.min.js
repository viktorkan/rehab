(function(c,a){var b=function(f){if(a.isString(f)){return f.trim().length}return 0};var e=function(o){var n=16,k=o.find(".fw-map-canvas"),g=isNaN(parseInt(o.data("map-height")))?parseInt(k.width()*0.66):parseInt(o.data("map-height")),l=o.data("locations"),i=o.data("map-type"),m=(o.data("disable-scrolling")?true:false),j={center:("undefined"!==l&&l.length)?d(l):new google.maps.LatLng(-34,150),mapTypeId:google.maps.MapTypeId[i],scrollwheel:m,styles:[{featureType:"all",stylers:[{saturation:0},{hue:"#e7ecf0"}]},{featureType:"road",stylers:[{saturation:-70}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{saturation:-60}]}]},p=new google.maps.LatLngBounds(),f=new google.maps.Map(k.get(0),j);if("undefined"!==l&&l.length){l.forEach(function(r){gMapsCoords=new google.maps.LatLng(r.coordinates.lat,r.coordinates.lng);var v=c(".fw-map[data-template-uri]").data("template-uri");var u=v+"/images/gmap-marker.png";var q=new google.maps.Marker({position:gMapsCoords,map:f,icon:u});p.extend(gMapsCoords);if(b(r.description)||b(r.title)||b(r.url)||b(r.thumb)){var s=a.template("<% function isNotEmptyString(str) { if (_.isString(str)) {	return str.trim().length;} return 0; }  %><div class='infowindow'><% if (isNotEmptyString(location.thumb)) { %><div class='infowindow-thump'><img src='<%= location.thumb %>' ></div> <% } %><div class='infowindow-content'><% if ( isNotEmptyString(location.url) || isNotEmptyString(location.title) ) { %><div class='infowindow-title'><a href='<%- location.url %>'><%- isNotEmptyString(location.title) ?  location.title : location.url  %></a></div><% } %><% if ( isNotEmptyString(location.description) ) { %><div class='infowindow-description'><%= location.description %></div><% } %></div></div>");var t=new google.maps.InfoWindow({content:s({location:r})});google.maps.event.addListener(q,"click",function(){t.open(f,q)})}})}f.fitBounds(p);var h=google.maps.event.addListenerOnce(f,"zoom_changed",function(){if(f.getZoom()>n){f.setZoom(n)}google.maps.event.removeListener(h)});k.height(g);k.data("map",f)};var d=function(f){var m,i,g,h=f.length,l=0,k=0,j=0;f.forEach(function(o){var q=o.coordinates.lat*Math.PI/180,p=o.coordinates.lng*Math.PI/180,n=Math.cos(q)*Math.cos(p),s=Math.cos(q)*Math.sin(p),r=Math.sin(q);l+=n;k+=s;j+=r});l/=h;k/=h;j/=h;m=Math.atan2(k,l);i=Math.sqrt(l*l+k*k);g=Math.atan2(j,i);return{lng:(m*180/Math.PI),lat:(g*180/Math.PI)}};c(document).ready(function(){c(".fw-map").each(function(){e(c(this))})})}(jQuery,_));